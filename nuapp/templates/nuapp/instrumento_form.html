{% extends "nuapp/base.html" %}
{% block content %}

<div class="max-w-4xl mx-auto">

  <!-- Header -->
  <div class="mb-6">
    <h1 class="text-2xl font-extrabold text-slate-900">
      {% if instrumento %}
        Editar <span class="text-orange-500">Instrumento</span>
      {% else %}
        Nuevo <span class="text-orange-500">Instrumento</span>
      {% endif %}
    </h1>
    <p class="text-sm text-slate-500 mt-1">
      Completa la información principal del instrumento financiero.
    </p>
  </div>

  <!-- Form Card -->
  <form method="post"
        class="bg-white border border-slate-200 rounded-2xl shadow-sm p-6 space-y-6">
    {% csrf_token %}

    <!-- Código -->
    <div>
      <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">
        Código
      </label>
      <input type="text"
             name="codigo"
             value="{{ instrumento.codigo|default:'' }}"
             required
             class="w-full rounded-xl border border-slate-200 px-4 py-2 text-sm focus:ring-2 focus:ring-orange-200 outline-none"
             placeholder="Ej: ACC-CL-001">
    </div>

    <!-- Nombre -->
    <div>
      <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">
        Nombre
      </label>
      <input type="text"
             name="nombre"
             value="{{ instrumento.nombre|default:'' }}"
             required
             class="w-full rounded-xl border border-slate-200 px-4 py-2 text-sm focus:ring-2 focus:ring-orange-200 outline-none"
             placeholder="Ej: Acción Banco Chile">
    </div>

    <!-- Tipo / Mercado / Estado -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">

      <div>
        <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">
          Tipo
        </label>
        <select name="tipo"
                required
                class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-orange-200 outline-none">
          {% for value,label in tipos %}
            <option value="{{ value }}"
              {% if instrumento and instrumento.tipo == value %}selected{% endif %}>
              {{ label }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">
          Mercado
        </label>
        <select name="mercado"
                required
                class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-orange-200 outline-none">
          {% for value,label in mercados %}
            <option value="{{ value }}"
              {% if instrumento and instrumento.mercado == value %}selected{% endif %}>
              {{ label }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">
          Estado
        </label>
        <select name="estado"
                class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-orange-200 outline-none">
          {% for value,label in estados %}
            <option value="{{ value }}"
              {% if instrumento and instrumento.estado == value %}selected{% endif %}>
              {{ label }}
            </option>
          {% endfor %}
        </select>
      </div>

    </div>

    <!-- Fechas -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

      <div>
        <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">
          Fecha de Emisión
        </label>
        <input type="date"
               name="fecha_emision"
               value="{{ instrumento.fecha_emision|date:'Y-m-d' }}"
               class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-2 focus:ring-orange-200 outline-none">
      </div>

      <div>
        <label class="block text-xs font-semibold text-slate-500 uppercase mb-1">
          Fecha de Vencimiento
        </label>
        <input type="date"
               name="fecha_vencimiento"
               value="{{ instrumento.fecha_vencimiento|date:'Y-m-d' }}"
               class="w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:ring-2 focus:ring-orange-200 outline-none">
      </div>

    </div>

    <!-- Acciones -->
    <div class="flex justify-end gap-3 pt-4 border-t border-slate-200">

      <a href="{% url 'instrumentos' %}"
         class="inline-flex items-center justify-center rounded-xl px-5 py-2 text-sm font-semibold border border-slate-200 text-slate-700 hover:bg-slate-50 transition">
        Cancelar
      </a>

      <button type="submit"
              class="inline-flex items-center justify-center gap-2 rounded-xl px-5 py-2 text-sm font-semibold text-white bg-orange-500 hover:bg-orange-600 transition shadow-sm">
        Guardar instrumento
      </button>

    </div>

  </form>

</div>

{% endblock %}
