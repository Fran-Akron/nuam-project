{% extends "nuapp/base.html" %}
{% block content %}

<h1 class="text-2xl font-extrabold mb-6">Carga Masiva de Datos</h1>

<form method="POST" enctype="multipart/form-data"
      class="bg-white border border-slate-200 rounded-xl p-6 max-w-3xl shadow-sm">
  {% csrf_token %}

  <!-- ================================================= -->
  <!-- TIPO DE CARGA -->
  <!-- ================================================= -->
  <div class="mb-5">
    <label class="block text-xs font-semibold text-slate-500 mb-2">
      Tipo de Carga *
    </label>

    <select name="tipo"
            class="w-full border rounded-lg px-4 py-2"
            required>
      <option value="">Seleccionar‚Ä¶</option>
      <!-- üîß FIX: values alineados con el backend -->
      <option value="INSTRUMENTOS">
        Instrumentos Financieros
      </option>
      <option value="CALIFICACIONES">
        Calificaciones Tributarias
      </option>
    </select>
  </div>

  <!-- ================================================= -->
  <!-- MERCADO (solo aplica a instrumentos) -->
  <!-- ================================================= -->
  <div class="mb-5">
    <label class="block text-xs font-semibold text-slate-500 mb-2">
      Mercado
    </label>

    <select name="mercado"
            class="w-full border rounded-lg px-4 py-2">
      <option value="">Seleccionar mercado‚Ä¶</option>
      <option value="CL">Chile</option>
      <option value="PE">Per√∫</option>
      <option value="CO">Colombia</option>
    </select>

    <p class="text-xs text-slate-400 mt-1">
      * Solo requerido para Instrumentos Financieros
    </p>
  </div>

  <!-- ================================================= -->
  <!-- ARCHIVO CSV -->
  <!-- ================================================= -->
  <div class="mb-6">
    <label class="block text-xs font-semibold text-slate-500 mb-2">
      Archivo CSV *
    </label>

    <input type="file"
           name="archivo"
           accept=".csv"
           required>
  </div>

  <!-- ================================================= -->
  <!-- BOT√ìN -->
  <!-- ================================================= -->
  <button type="submit"
          class="px-6 py-2 bg-orange-500 text-white rounded-lg font-semibold hover:bg-orange-600">
    Procesar Archivo
  </button>

  <!-- ================================================= -->
  <!-- MENSAJES -->
  <!-- ================================================= -->
  {% if mensaje %}
    <p class="mt-4 text-sm text-green-600 font-semibold">
      {{ mensaje }}
    </p>
  {% endif %}

  {% if error %}
    <p class="mt-4 text-sm text-red-600 font-semibold">
      {{ error }}
    </p>
  {% endif %}
</form>

{% endblock %}
