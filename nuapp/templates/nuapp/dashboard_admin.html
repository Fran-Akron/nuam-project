{% extends "base.html" %}

{% block title %}Dashboard Administrador - NUAM{% endblock %}

{% block content %}
<div class="flex-1 p-6 overflow-y-auto">
    <h2 class="text-3xl font-bold mb-6 text-white">
        Dashboard Administrador NUAM
    </h2>

    <!-- Tarjetas Resumen Administrador -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">

        <!-- Usuarios registrados -->
        <div class="bg-slate-800 p-5 rounded-xl shadow-xl border border-slate-700">
            <div class="text-sm font-semibold text-slate-400 uppercase">
                Usuarios registrados
            </div>
            <div class="flex items-baseline mt-2">
                <div class="text-3xl font-extrabold text-cyan-400">
                    {{ total_usuarios|default:"24" }}
                </div>
            </div>
            <p class="text-xs text-slate-500 mt-1">
                Incluye administradores y analistas.
            </p>
        </div>

        <!-- Consultas realizadas -->
        <div class="bg-slate-800 p-5 rounded-xl shadow-xl border border-slate-700">
            <div class="text-sm font-semibold text-slate-400 uppercase">
                Consultas de mercado (últimos 7 días)
            </div>
            <div class="flex items-baseline mt-2">
                <div class="text-3xl font-extrabold text-white">
                    {{ total_consultas|default:"152" }}
                </div>
            </div>
            <p class="text-xs text-slate-500 mt-1">
                Total de consultas ejecutadas por todos los colaboradores.
            </p>
        </div>

        <!-- Errores API -->
        <div class="bg-slate-800 p-5 rounded-xl shadow-xl border border-slate-700">
            <div class="text-sm font-semibold text-slate-400 uppercase">
                Errores API (hoy)
            </div>
            <div class="flex items-baseline mt-2">
                <div class="text-3xl font-extrabold text-red-400">
                    {{ errores_hoy|default:"3" }}
                </div>
            </div>
            <p class="text-xs text-slate-500 mt-1">
                Fallos de conexión o respuesta lenta al consolidar datos.
            </p>
        </div>

        <!-- Sesiones activas -->
        <div class="bg-slate-800 p-5 rounded-xl shadow-xl border border-slate-700">
            <div class="text-sm font-semibold text-slate-400 uppercase">
                Sesiones activas
            </div>
            <div class="flex items-baseline mt-2">
                <div class="text-3xl font-extrabold text-green-400">
                    {{ sesiones_activas|default:"5" }}
                </div>
            </div>
            <p class="text-xs text-slate-500 mt-1">
                Colaboradores conectados actualmente al sistema.
            </p>
        </div>
    </div>

    <!-- Panel central administrador -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <!-- Últimas consultas -->
        <div class="lg:col-span-2 bg-slate-800 p-6 rounded-xl shadow-xl border border-slate-700">
            <h3 class="text-xl font-semibold mb-4 text-white">
                Últimas consultas ejecutadas
            </h3>
            <div class="overflow-x-auto rounded-lg border border-slate-700">
                <table class="min-w-full divide-y divide-slate-700">
                    <thead class="bg-slate-700">
                        <tr>
                            <th class="px-4 py-2 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">
                                Colaborador
                            </th>
                            <th class="px-4 py-2 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">
                                Bolsa
                            </th>
                            <th class="px-4 py-2 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">
                                Símbolo
                            </th>
                            <th class="px-4 py-2 text-left text-xs font-medium text-slate-300 uppercase tracking-wider">
                                Fecha
                            </th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-700 text-sm">
                        <!-- Ejemplos, luego los reemplazas por datos reales -->
                        <tr class="hover:bg-slate-700/60">
                            <td class="px-4 py-3 text-slate-200">Admin. Analista</td>
                            <td class="px-4 py-3 text-slate-200">Santiago</td>
                            <td class="px-4 py-3 text-cyan-400 font-semibold">CCU</td>
                            <td class="px-4 py-3 text-slate-400">2025-12-01 10:23</td>
                        </tr>
                        <tr class="hover:bg-slate-700/60">
                            <td class="px-4 py-3 text-slate-200">G. Carvajal</td>
                            <td class="px-4 py-3 text-slate-200">Colombia</td>
                            <td class="px-4 py-3 text-cyan-400 font-semibold">ECOPETROL</td>
                            <td class="px-4 py-3 text-slate-400">2025-12-01 09:58</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Bloque de administración rápida -->
        <div class="bg-slate-800 p-6 rounded-xl shadow-xl border border-slate-700">
            <h3 class="text-xl font-semibold mb-4 text-white">
                Acciones rápidas
            </h3>
            <ul class="space-y-3 text-sm text-slate-200">
                <li>
                    <a href="/admin/nuapp/colaborador/" class="hover:text-cyan-400 transition">
                        • Gestionar colaboradores
                    </a>
                </li>
                <li>
                    <a href="/admin/auth/user/" class="hover:text-cyan-400 transition">
                        • Gestionar usuarios del sistema
                    </a>
                </li>
                <li>
                    <a href="/admin/" class="hover:text-cyan-400 transition">
                        • Ir al panel completo de Django Admin
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <footer class="mt-10 text-center text-sm text-slate-600 border-t border-slate-800 pt-4">
        Plataforma NUAM - Panel de administración.
    </footer>
</div>
{% endblock %}
